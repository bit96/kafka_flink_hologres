我想做一个mcp工具，它的能力是通过调用这个mcp工具，可以读取一个数据库获取信息，得到kafka的链接信息和指定topic，然后去读取10条topic的数据分析其数据结构，再生成表的DDL，写好flinksql的source、sink、insert逻辑。请和我多轮沟通做出一份详细的需求文档
⏺ 好的,我来和你详细沟通这个 MCP 工具的需求。让我先了解一些关键信息:

⏺ User answered Claude's questions:
  ⎿
     · 这个 MCP 工具主要用于什么场景?是为了自动化 Flink 任务的创建,还是用于快速原型开发? → 快速原型开发和测试
     · 元数据存储在什么类型的数据库中? → Hologres
     · Sink 目标是固定的 Hologres,还是需要支持多种目标? → 仅 Hologres
     · 数据类型推断的复杂度要求如何? → 基础类型推断

⏺ 好的,我已经了解了基本情况。让我继续深入了解更多细节:

⏺ User answered Claude's questions:
  ⎿
     · Hologres 中存储 Kafka 连接信息的表结构是怎样的?已经设计好了还是需要我帮你设计? → 单表存储所有配置
     · Kafka Topic 中的数据是什么格式? → JSON
     · 对于 Hologres Sink 表,是需要自动创建,还是只生成 DDL 语句? → 智能创建
     · MCP 工具的输出格式是什么?生成 SQL 文件还是 Python 代码? → 完整 SQL 文件

⏺ 非常好!让我继续了解一些实现细节:

⏺ User answered Claude's questions:
  ⎿
     · MCP 工具使用什么语言实现? → Python
     · Hologres 中存储配置的单表,表结构已经设计好了吗? → 需要设计
     · 生成的 DDL 中,字段的 NULL/NOT NULL 约束如何确定? → 默认可空
     · 用户如何指定要处理的 Kafka Topic? → 接收标识参数

⏺ 非常好!让我再了解最后几个关键细节:

⏺ User answered Claude's questions:
  ⎿
     · 生成的 Flink SQL 文件如何输出给用户? → 保存到hologres中，会有一个表用来记录生成的flinksql
     · 是否需要处理 Kafka 消息的 key 或其他元数据 (如 timestamp, partition)? → 这个到时候会提供案例来实现
     · 如果 10 条样本数据中,同一字段出现不同类型,如何处理? → 使用宽松类型
     · MCP 工具本身是否需要配置文件来存储 Hologres 的连接信息? → 需要配置文件

⏺ 非常好!我已经收集到足够的信息了。让我再确认最后几个细节:

⏺ User answered Claude's questions:
  ⎿
     · 连接 Kafka 读取样本数据时,使用哪个 Python 库? → kafka-python
     · MCP 工具是否需要实际在 Hologres 中创建 Sink 表? → 智能检查创建
     · Hologres 中记录生成的 Flink SQL 的表结构,需要我帮你设计吗? → 需要设计
     · 对于各种异常情况(如 Kafka 连接失败、数据格式错误等),需要多完善的错误处理? → 暂不考虑

⏺ 完美!我已经收集到所有必要的信息。现在让我为你整理一份详细的需求文档。

⏺User approved Claude's plan:
  ⎿  我将创建一份详细的 MCP 工具需求文档,包含以下内容:

     文档结构

     1. 项目概述 - 工具目标、使用场景、核心价值
     2. 功能需求 - 详细的功能描述和工作流程
     3. 技术架构 - 技术栈选型、系统架构设计
     4. 数据库设计 - Hologres 元数据表结构设计(配置表、SQL记录表)
     5. MCP 工具接口设计 - 工具名称、参数、返回值
     6. 核心流程设计 - 数据采样、类型推断、DDL生成、SQL组装
     7. 配置文件设计 - Hologres 连接配置
     8. 实现细节 - 关键算法和逻辑说明
     9. 项目结构 - 代码目录组织
     10. 开发计划 - 分阶段实施建议

     文档将保存到 discuss/ 目录,使用简体中文编写。
  ⎿

⏺ 好的,让我开始创建详细的需求文档。

⏺ Bash(mkdir -p /Users/abc/PycharmProjects/kafka_flink_hologres/discuss)